<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ì¤€ì„±ì…œë¡</title>
  <style>
    :root{
      --bg:#000;
      --panel:#0f0f10;
      --border:#222;
      --text:#f5f5f5;
      --muted:#9aa0a6;
      --danger:#ff3b30;
    }

    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      background: var(--bg);
      color: var(--text);
      padding: 22px;
      max-width: 760px;
      margin-inline: auto;
    }

    h1{ margin: 4px 0 16px; font-size: 26px; }

    .row{
      margin: 12px 0;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
    }

    label{ color: var(--muted); font-weight: 700; }

    input, button{
      padding: 12px 14px;
      font-size: 16px;
      border-radius: 14px;
      border: 1px solid var(--border);
      background: var(--panel);
      color: var(--text);
      outline: none;
    }

    input{ flex:1; min-width: 240px; }

    button{ cursor:pointer; }
    button:active{ transform: translateY(1px); }

    button.primary{
      background: #fff;
      color:#000;
      border-color:#fff;
      font-weight: 900;
    }

    button.ghost{
      background: transparent;
      border-color: var(--border);
      color: var(--text);
    }

    .picks{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }

    .pick{
      width: 64px;
      height: 64px;
      display:grid;
      place-items:center;
      border-radius: 16px;
      border: 1px solid var(--border);
      background: #0b0b0c;
      font-weight: 900;
      user-select:none;
    }

    .pick small{
      display:block;
      margin-top:2px;
      font-size:11px;
      color: var(--muted);
      font-weight:700;
    }

    .pick.selected{
      border-color:#fff;
      background:#fff;
      color:#000;
    }

    .pick.e{ border-color:#3a1010; }
    .pick.e.selected{
      border-color: var(--danger);
      background: var(--danger);
      color:#000;
    }

    #out{
      margin-top: 16px;
      padding: 16px;
      border: 1px solid var(--border);
      border-radius: 16px;
      background: #070707;
      min-height: 64px;
    }

    .cards{
      font-weight: 900;
      font-size: 18px;
      line-height: 1.8;
    }

    .tagline{
      color: var(--muted);
      font-weight: 800;
      margin-left: 8px;
      font-size: 14px;
    }

    .sumBox{
      margin-top: 14px;
      padding-top: 12px;
      border-top: 1px solid #151515;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
    }

    .chip{
      border: 1px solid var(--border);
      background: #0b0b0c;
      padding: 8px 10px;
      border-radius: 999px;
      font-weight: 900;
      font-size: 14px;
      color: var(--text);
    }

    .muted{
      color: var(--muted);
      font-size: 13px;
      margin-top: 10px;
    }

    .err{ color: var(--danger); font-weight: 900; }

    /* ====== ğŸ” ì ê¸ˆ í™”ë©´ ìŠ¤íƒ€ì¼ ====== */
    #lock{
      min-height: 80vh;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap:12px;
      text-align:center;
    }
    #lock h2{
      margin: 0 0 6px;
      font-size: 22px;
      font-weight: 900;
    }
    #lock .box{
      width:min(520px, 100%);
      border:1px solid var(--border);
      background:#070707;
      border-radius: 16px;
      padding: 16px;
    }
    #lock input{
      width:100%;
      box-sizing:border-box;
      min-width: 0;
    }
    #lock .hint{
      margin-top:10px;
      color: var(--muted);
      font-size: 13px;
      font-weight: 800;
    }
  </style>
</head>
<body>

  <!-- ğŸ” ì ê¸ˆ í™”ë©´ -->
  <div id="lock">
    <div class="box">
      <h2>ğŸ”’ ì•”í˜¸ ì…ë ¥</h2>
      <div class="row" style="margin:0;">
        <input id="pw" type="password" placeholder="ì•”í˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”" autocomplete="off" />
        <button class="primary" id="unlock">í™•ì¸</button>
      </div>
      <div id="pwErr" class="err" style="display:none; margin-top:10px;">ì•”í˜¸ê°€ í‹€ë¦¼</div>
      <div class="hint">ì•”í˜¸ì…ë ¥</div>
    </div>
  </div>

  <!-- ğŸ”“ ì‹¤ì œ ì•± í™”ë©´ -->
  <div id="app" style="display:none;">
    <h1>ì¤€ì„±ì…œë¡</h1>

    <div class="row">
      <label for="seed">ë°©ì œëª©</label>
      <input id="seed" placeholder="ì˜ˆ: ìˆ«ì ë˜ëŠ” ë¬¸ì" />
    </div>

    <div class="row">
      <label>í”Œë ˆì´ì–´ ì„ íƒ</label>
      <div class="picks" id="picks">
        <div class="pick" data-p="a">A<small>í”Œë ˆì´ì–´</small></div>
        <div class="pick" data-p="b">B<small>í”Œë ˆì´ì–´</small></div>
        <div class="pick" data-p="c">C<small>í”Œë ˆì´ì–´</small></div>
        <div class="pick" data-p="d">D<small>í”Œë ˆì´ì–´</small></div>
        <div class="pick e" data-p="e">E<small>ë²”ì¸</small></div>
      </div>
    </div>

    <div class="row">
      <button class="primary" id="btn">í™•ì¸</button>
      <button class="ghost" id="reset">ì´ˆê¸°í™”</button>
    </div>

    <div id="out">
      <div class="muted">ì‹œë“œë¥¼ ì…ë ¥í•˜ê³  í”Œë ˆì´ì–´ë¥¼ ì„ íƒí•˜ì„¸ìš”.</div>
    </div>
  </div>

<script>
  /* ========= ğŸ” ì ê¸ˆ ë¡œì§ ========= */
  const PASSWORD = "junsung";

  const lockEl = document.getElementById("lock");
  const appEl  = document.getElementById("app");
  const pwEl   = document.getElementById("pw");
  const unlockBtn = document.getElementById("unlock");
  const pwErrEl = document.getElementById("pwErr");

  function tryUnlock(){
    const v = pwEl.value;
    if (v === PASSWORD) {
      pwErrEl.style.display = "none";
      lockEl.style.display = "none";
      appEl.style.display = "block";
      // ì»¤ì„œ ë°”ë¡œ ë°©ì œëª©ìœ¼ë¡œ
      document.getElementById("seed").focus();
    } else {
      pwErrEl.style.display = "block";
      pwEl.select();
    }
  }

  unlockBtn.addEventListener("click", tryUnlock);
  pwEl.addEventListener("keydown", (e) => {
    if (e.key === "Enter") tryUnlock();
  });

  /* ========= ê¸°ì¡´ ê²Œì„ ë¡œì§ ========= */
  const CARDS = [
    { name: "ì„¸ë°”ìŠ¤ì°¬ ëª¨ëŸ°", tags: ["í•´ê³¨","ì£¼ë¨¹"] },
    { name: "ì•„ì´ë¦° ì• ë“¤ëŸ¬", tags: ["ì£¼ë¨¹","ì „êµ¬","ëª©ê±¸ì´"] },
    { name: "ë ˆìŠ¤íŠ¸ë ˆì´ë“œ ê²½ê°", tags: ["ë±ƒì§€","ëˆˆ","ì±…"] },
    { name: "ê·¸ë ‰ìŠ¨ ê²½ê°", tags: ["ë±ƒì§€","ì£¼ë¨¹","ì±…"] },
    { name: "ë² ì¸ì¦ˆ ê²½ê°", tags: ["ë±ƒì§€","ì „êµ¬"] },
    { name: "ë¸Œë˜ë“œ ìŠ¤íŠ¸ë¦¬íŠ¸ ê²½ê°", tags: ["ë±ƒì§€","ì£¼ë¨¹"] },
    { name: "í™‰í‚¨ìŠ¤ ê²½ê°", tags: ["ë±ƒì§€","íŒŒì´í”„","ëˆˆ"] },
    { name: "ì…œë¡í™ˆì¦ˆ", tags: ["íŒŒì´í”„","ì „êµ¬","ì£¼ë¨¹"] },
    { name: "ì¡´ ì™“ìŠ¨", tags: ["íŒŒì´í”„","ëˆˆ","ì£¼ë¨¹"] },
    { name: "ë§ˆì´í¬ë¡œ í™ˆì¦ˆ", tags: ["íŒŒì´í”„","ì „êµ¬","ì±…"] },
    { name: "í—ˆë“œìŠ¨ ë¶€ì¸", tags: ["íŒŒì´í”„","ëª©ê±¸ì´"] },
    { name: "ë©”ë¦¬ ëª¨ìŠ¤í„´", tags: ["ì±…","ëª©ê±¸ì´"] },
    { name: "ì œì„ìŠ¤ ëª¨ë¦¬ì–´í‹°", tags: ["í•´ê³¨","ì „êµ¬"] }
  ];

  function escapeHtml(s) {
    return String(s).replace(/[&<>"']/g, (m) => ({
      "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"
    }[m]));
  }

  function xmur3(str) {
    let h = 1779033703 ^ str.length;
    for (let i = 0; i < str.length; i++) {
      h = Math.imul(h ^ str.charCodeAt(i), 3432918353);
      h = (h << 13) | (h >>> 19);
    }
    return function() {
      h = Math.imul(h ^ (h >>> 16), 2246822507);
      h = Math.imul(h ^ (h >>> 13), 3266489909);
      h ^= (h >>> 16);
      return h >>> 0;
    };
  }

  function mulberry32(seed) {
    let a = seed >>> 0;
    return function () {
      a = (a + 0x6D2B79F5) >>> 0;
      let t = a;
      t = Math.imul(t ^ (t >>> 15), t | 1);
      t ^= t + Math.imul(t ^ (t >>> 7), t | 61);
      return ((t ^ (t >>> 14)) >>> 0) / 4294967296;
    };
  }

  function seededShuffle(arr, seedInt) {
    const rand = mulberry32(seedInt);
    const a = arr.slice();
    for (let i = a.length - 1; i > 0; i--) {
      const j = Math.floor(rand() * (i + 1));
      [a[i], a[j]] = [a[j], a[i]];
    }
    return a;
  }

  function deal(seedStr) {
    const seedInt = xmur3(seedStr)();
    const shuffled = seededShuffle(CARDS, seedInt);
    return {
      a: shuffled.slice(0, 3),
      b: shuffled.slice(3, 6),
      c: shuffled.slice(6, 9),
      d: shuffled.slice(9, 12),
      e: shuffled.slice(12, 13)
    };
  }

  // âœ… íƒœê·¸ í•©ì‚°
  function sumTags(cards) {
    const counts = {};
    for (const c of cards) {
      for (const t of c.tags) counts[t] = (counts[t] || 0) + 1;
    }
    return Object.entries(counts)
      .sort((a,b) => (b[1]-a[1]) || a[0].localeCompare(b[0], "ko"))
      .map(([tag, n]) => ({ tag, n }));
  }

  const seedEl = document.getElementById("seed");
  const outEl = document.getElementById("out");
  const picksEl = document.getElementById("picks");
  const btnEl = document.getElementById("btn");
  const resetEl = document.getElementById("reset");

  let selected = null;

  function setSelected(p) {
    selected = p;
    document.querySelectorAll(".pick").forEach(el => {
      el.classList.toggle("selected", el.dataset.p === p);
    });
  }

  picksEl.addEventListener("click", (e) => {
    const el = e.target.closest(".pick");
    if (!el) return;
    setSelected(el.dataset.p);
  });

  btnEl.addEventListener("click", () => {
    const seed = seedEl.value.trim();

    if (!seed) {
      outEl.innerHTML = `<div class="err">ë°©ì œëª© ë„£ì–´ì£¼ì„¸ìš”</div>`;
      return;
    }
    if (!selected) {
      outEl.innerHTML = `<div class="err">í”Œë ˆì´ì–´ë¥¼ ì„ íƒí•˜ì„¸ìš”</div>`;
      return;
    }

    const myCards = deal(seed)[selected];
    const sums = sumTags(myCards);

    outEl.innerHTML = `
      <div class="cards">
        ${myCards.map(c => {
          const name = escapeHtml(c.name);
          const tags = c.tags.map(t => `${escapeHtml(t)}1`).join(", ");
          return `ğŸƒ ${name} <span class="tagline">[${tags}]</span>`;
        }).join("<br>")}
      </div>

      <div class="sumBox">
        <div class="muted" style="margin:0; font-weight:900;">ìµœì¢…í•©</div>
        ${sums.map(x => `<div class="chip">${escapeHtml(x.tag)} ${x.n}</div>`).join("")}
      </div>
    `;
  });

  resetEl.addEventListener("click", () => {
    seedEl.value = "";
    selected = null;
    document.querySelectorAll(".pick").forEach(el => el.classList.remove("selected"));
    outEl.innerHTML = `<div class="muted">ì‹œë“œë¥¼ ì…ë ¥í•˜ê³  í”Œë ˆì´ì–´ë¥¼ ì„ íƒí•˜ì„¸ìš”.</div>`;
  });
</script>
</body>
</html>

